-------------BANCHAN_CATEGORY-------------------
CREATE TABLE CATEGORY 
(
  NUM NUMBER NOT NULL 
, CATEGORY_NAME VARCHAR2(100 BYTE) NOT NULL 
, CONSTRAINT PK_CATEGORY PRIMARY KEY ,
  (
    NUM 
  )
  ENABLE
  );
  
  시퀀스 : 
  CREATE SEQUENCE SEQ_CATEGORY;
  DROP SEQUENCE SEQ_CATEGORY;
  
  테스트 값
  
  INSERT INTO CATEGORY (NUM, CATEGORY_NAME)
  VALUES (SEQ_CATEGORY.NEXTVAL,'볶음반찬');
INSERT INTO CATEGORY (NUM, CATEGORY_NAME)
  VALUES (SEQ_CATEGORY.NEXTVAL,'국/탕/찌개');
  INSERT INTO CATEGORY (NUM, CATEGORY_NAME)
  VALUES (SEQ_CATEGORY.NEXTVAL,'고기요리');
  
  -------------BANCHAN_PRODUCT-------------------
  CREATE TABLE PRODUCT 
(
  NUM NUMBER NOT NULL 
, CATEGORY_NUM NUMBER NOT NULL 
, PRODUCT_NAME VARCHAR2(200 BYTE) NOT NULL 
, PRODUCT_IMG VARCHAR2(200 BYTE) DEFAULT 'pro_default.png'
, PRODUCT_PRICE NUMBER NOT NULL 
, PRODUCT_STOCK NUMBER DEFAULT 1 NOT NULL 
, PRODUCT_CONTENT VARCHAR2(1000 BYTE) 
, CONSTRAINT PRODUCT_PK PRIMARY KEY 
  (
    NUM 
  )
  ENABLE 
);

ALTER TABLE PRODUCT
ADD CONSTRAINT PRODUCT_FK1 FOREIGN KEY
(
  CATEGORY_NUM 
)
REFERENCES CATEGORY
(
  NUM 
)
ON DELETE CASCADE ENABLE;

시퀀스 :
  CREATE SEQUENCE SEQ_PRODUCT;
    DROP SEQUENCE SEQ_PRODUCT;

 -------------BANCHAN_REVIEW-------------------
  CREATE TABLE REVIEW 
(
  NUM NUMBER NOT NULL 
, PRODUCT_NUM NUMBER NOT NULL 
, REVIEW_WRITER VARCHAR2(20 BYTE) NOT NULL 
, WDATE DATE DEFAULT sysdate NOT NULL 
, REVIEW_CONTENT VARCHAR2(1000 BYTE) NOT NULL 
, REVIEW_PHOTO VARCHAR2(100 BYTE) 
, CONSTRAINT REVIEW_PK PRIMARY KEY 
  (
    NUM 
  )
  ENABLE 
);

ALTER TABLE REVIEW
ADD CONSTRAINT REVIEW_FK1 FOREIGN KEY
(
  PRODUCT_NUM 
)
REFERENCES PRODUCT
(
  NUM 
)
ON DELETE CASCADE ENABLE;



시퀀스 :
  CREATE SEQUENCE SEQ_REVIEW;
  DROP SEQUENCE SEQ_REVIEW;
  
테스트 값 :
INSERT INTO REVIEW(NUM,PRODUCT_NUM,REVIEW_WRITER,REVIEW_CONTENT)
VALUES (SEQ_REVIEW.NEXTVAL,1,'user001','감자볶음 맛있어요')

  -------------BANCHAN_CART-------------------
CREATE TABLE CART 
(
  NUM NUMBER NOT NULL 
, PRODUCT_NUM NUMBER NOT NULL 
, MEMBER_ID VARCHAR2(20 BYTE) NOT NULL 
, AMOUNT NUMBER NOT NULL 
, CONSTRAINT CART_PK PRIMARY KEY 
  (
    NUM 
  )
  ENABLE 
);

ALTER TABLE CART
ADD CONSTRAINT CART_FK1 FOREIGN KEY
(
  PRODUCT_NUM 
)
REFERENCES PRODUCT
(
  NUM 
)
ON DELETE CASCADE ENABLE;

ALTER TABLE CART
ADD CONSTRAINT CART_FK2 FOREIGN KEY
(
  MEMBER_ID 
)
REFERENCES BANCHAN_MEMBER
(
  MEMBER_ID 
)
ENABLE;

시퀀스 : 
CREATE SEQUENCE SEQ_CART;
DROP SEQUENCE SEQ_CART;

테스트 값 : 
INSERT INTO CART(NUM,PRODUCT_NUM,MEMBER_ID,AMOUNT)
VALUES(SEQ_CART.NEXTVAL,1,'user001',1);

select * from cart;

select c.num, c.member_id,c.product_num,p.product_name,p.product_img,p.product_price
from cart c join product p on (c.product_num = p.num) where member_id='user001' order by num;
  


